var t=require("react/jsx-runtime"),e=require("react");function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},n.apply(this,arguments)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var r={renderNoise:f,setConfig:l,initFinished:{default:!1},caches:[],init:d,configs:{default:{opacity:.1,color:"75 75 75",resolution:{width:1080,height:1080}}}},o=[],a=function(t){return o=[].concat(o,[t]),function(){o=o.filter(function(e){return e!==t})}},c=function(){return r},s=function(){return r},u=function(){for(var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(o);!(t=e()).done;)(0,t.value)()};function l(t,e){var i,o,a;void 0===e&&(e="default");var c=(r.configs[e]||{}).resolution;t.resolution&&c&&(null==(i=t.resolution)?void 0:i.width)!==c.width&&(null==(o=t.resolution)?void 0:o.height)!==c.height&&(r.caches[e]=null),(r=n({},r,{configs:n({},r.configs,(a={},a[e]=n({resolution:{width:1920,height:1080}},r.configs[e],t),a))})).initFinished[e]=!1,d(e),u()}function d(t){if(void 0===t&&(t="default"),r.initFinished[t])return null;var e=r.configs[t],n=e.resolution||{},i=r.caches[t]||function(t,e,n){void 0===t&&(t=1080),void 0===e&&(e=1080);var i=document.createElement("canvas");return i.setAttribute("width",""+t),i.setAttribute("height",""+e),r.caches[n]=i,i}(n.width,n.height,t);!function(t,e,n){void 0===n&&(n=!1);var i=t.canvas,r=t.createImageData(i.width,i.height),o=r.data.length;t.imageSmoothingEnabled=!0;for(var a=e.opacity,c=e.color,s=(null==c?void 0:c.split(" "))||["255","255","255"],u=s[0],l=s[1],d=s[2],f=0;f<o;f+=4){var h=Math.random();r.data[f]=h<.5?parseInt(u):1,r.data[f+1]=h<.5?parseInt(l):1,r.data[f+2]=h<.5?parseInt(d):1,r.data[f+3]=h<.5?255*a|0:0}if(t.putImageData(r,0,0),n)try{return i.toDataURL()}catch(t){return console.error(t),null}}(i.getContext("2d"),e),r.initFinished[t]=!0}function f(t,e){void 0===e&&(e="default");var n=r.configs[e];if(!t||!n)return null;var i=t.getBoundingClientRect(),o=i.width,a=i.height,c=n.resolution;return null==t||t.getContext("2d").clearRect(0,0,o,a),t.setAttribute("width",c.width+"px"),t.setAttribute("height",c.height+"px"),t.style.minWidth=""+c.width,t.style.minHeight=""+c.height,t.getContext("2d").drawImage(r.caches[e],0,0),function(){null==t||t.getContext("2d").clearRect(0,0,o,a)}}var h=e.forwardRef(function(n,i){var r=n.children,o=n.className,u=void 0===o?"":o,l=n.noiseKey,h=n.isAnimated,v=void 0!==h&&h,g=n.style,y=void 0===g?{}:g,m=n.opacity,p=void 0===m?1:m,b=function(t){var n=e.useRef(null),i=e.useSyncExternalStore(a,c,s),r=i.configs,o=i.initFinished;return e.useLayoutEffect(function(){if(r[t]){d(t);var e=f(n.current,t);return function(){null==e||e()}}},[r[t],t]),[n,!o[t]]}(void 0===l?"default":l);return t.jsx("div",{className:u,ref:i,children:t.jsxs("div",{style:y,"data-noise":"container","data-noise-anim":v,className:"_lz5XT",children:[t.jsx("canvas",{ref:b[0],"data-noise":"canvas",className:"_FgVMr",style:{"--opacity":p}}),t.jsx("div",{"data-noise":"children",className:"_cbJPb",children:r})]})})}),v=e.forwardRef(function(e,n){var i=e.style;return t.jsx("div",{className:"_meFOG "+e.className,style:void 0===i?{}:i,ref:n,children:e.children})});exports.Noise=h,exports.NoiseContent=v,exports.useNoiseConfig=function(t,n){void 0===n&&(n=[]),e.useEffect(function(){null==l||l(t,t.key)},n)};
