!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react/jsx-runtime"),require("react")):"function"==typeof define&&define.amd?define(["exports","react/jsx-runtime","react"],e):e((t||self).reactNoise={},t.jsxRuntime,t.react)}(this,function(t,e,n){function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(this,arguments)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var o={renderNoise:h,setConfig:d,initFinished:{default:!1},caches:[],init:f,configs:{default:{opacity:.1,color:"75 75 75",resolution:{width:1080,height:1080}}}},a=[],c=function(t){return a=[].concat(a,[t]),function(){a=a.filter(function(e){return e!==t})}},s=function(){return o},u=function(){return o},l=function(){for(var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(a);!(t=e()).done;)(0,t.value)()};function d(t,e){var n,r,a;void 0===e&&(e="default");var c=(o.configs[e]||{}).resolution;t.resolution&&c&&(null==(n=t.resolution)?void 0:n.width)!==c.width&&(null==(r=t.resolution)?void 0:r.height)!==c.height&&(o.caches[e]=null),(o=i({},o,{configs:i({},o.configs,(a={},a[e]=i({resolution:{width:1920,height:1080}},o.configs[e],t),a))})).initFinished[e]=!1,f(e),l()}function f(t){if(void 0===t&&(t="default"),o.initFinished[t])return null;var e=o.configs[t],n=e.resolution||{},i=o.caches[t]||function(t,e,n){void 0===t&&(t=1080),void 0===e&&(e=1080);var i=document.createElement("canvas");return i.setAttribute("width",""+t),i.setAttribute("height",""+e),o.caches[n]=i,i}(n.width,n.height,t);!function(t,e,n){void 0===n&&(n=!1);var i=t.canvas,r=t.createImageData(i.width,i.height),o=r.data.length;t.imageSmoothingEnabled=!0;for(var a=e.opacity,c=e.color,s=(null==c?void 0:c.split(" "))||["255","255","255"],u=s[0],l=s[1],d=s[2],f=0;f<o;f+=4){var h=Math.random();r.data[f]=h<.5?parseInt(u):1,r.data[f+1]=h<.5?parseInt(l):1,r.data[f+2]=h<.5?parseInt(d):1,r.data[f+3]=h<.5?255*a|0:0}if(t.putImageData(r,0,0),n)try{return i.toDataURL()}catch(t){return console.error(t),null}}(i.getContext("2d"),e),o.initFinished[t]=!0}function h(t,e){void 0===e&&(e="default");var n=o.configs[e];if(!t||!n)return null;var i=t.getBoundingClientRect(),r=i.width,a=i.height,c=n.resolution;return null==t||t.getContext("2d").clearRect(0,0,r,a),t.setAttribute("width",c.width+"px"),t.setAttribute("height",c.height+"px"),t.style.minWidth=""+c.width,t.style.minHeight=""+c.height,t.getContext("2d").drawImage(o.caches[e],0,0),function(){null==t||t.getContext("2d").clearRect(0,0,r,a)}}var v=n.forwardRef(function(t,i){var r=t.children,o=t.className,a=void 0===o?"":o,l=t.noiseKey,d=t.isAnimated,v=void 0!==d&&d,g=t.style,y=void 0===g?{}:g,m=t.opacity,p=void 0===m?1:m,b=function(t){var e=n.useRef(null),i=n.useSyncExternalStore(c,s,u),r=i.configs,o=i.initFinished;return n.useLayoutEffect(function(){if(r[t]){f(t);var n=h(e.current,t);return function(){null==n||n()}}},[r[t],t]),[e,!o[t]]}(void 0===l?"default":l);return e.jsx("div",{className:a,ref:i,children:e.jsxs("div",{style:y,"data-noise":"container","data-noise-anim":v,className:"_lz5XT",children:[e.jsx("canvas",{ref:b[0],"data-noise":"canvas",className:"_FgVMr",style:{"--opacity":p}}),e.jsx("div",{"data-noise":"children",className:"_cbJPb",children:r})]})})}),g=n.forwardRef(function(t,n){var i=t.style;return e.jsx("div",{className:"_meFOG "+t.className,style:void 0===i?{}:i,ref:n,children:t.children})});t.Noise=v,t.NoiseContent=g,t.useNoiseConfig=function(t,e){void 0===e&&(e=[]),n.useEffect(function(){null==d||d(t,t.key)},e)}});
